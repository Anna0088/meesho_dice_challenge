# ==========================================
# Meesho Ecosystem Environment Configuration
# ==========================================
# Copy this file to .env and update with your values

# ------------------------------
# Application Settings
# ------------------------------
NODE_ENV=development
PORT=3000
API_VERSION=v1
LOG_LEVEL=debug
SERVICE_NAME=meesho-ecosystem

# ------------------------------
# Microservices Ports
# ------------------------------
GATEWAY_PORT=3000
SELLER_SERVICE_PORT=3001
REVIEW_SERVICE_PORT=3002
LOYALTY_SERVICE_PORT=3003
ANALYTICS_SERVICE_PORT=3004

# ------------------------------
# Database Configuration
# ------------------------------
# PostgreSQL Main Database
DB_HOST=localhost
DB_PORT=5432
DB_NAME=meesho_db
DB_USER=postgres
DB_PASSWORD=postgres
DB_SSL=false
DB_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=10000

# TimescaleDB (Analytics)
TIMESCALE_HOST=localhost
TIMESCALE_PORT=5433
TIMESCALE_DB=meesho_metrics
TIMESCALE_USER=timescale
TIMESCALE_PASSWORD=timescale

# ------------------------------
# Redis Configuration
# ------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_KEY_PREFIX=meesho:
REDIS_TTL=3600

# ------------------------------
# RabbitMQ Configuration
# ------------------------------
RABBITMQ_URL=amqp://guest:guest@localhost:5672
RABBITMQ_EXCHANGE=meesho-events
RABBITMQ_QUEUE_PREFIX=meesho-
RABBITMQ_PREFETCH=10

# ------------------------------
# Elasticsearch Configuration
# ------------------------------
ELASTIC_URL=http://localhost:9200
ELASTICSEARCH_INDEX_PREFIX=meesho-
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=

# ------------------------------
# Security & Authentication
# ------------------------------
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your-refresh-token-secret
JWT_REFRESH_EXPIRY=30d

ENCRYPTION_KEY=your-32-character-encryption-key
HASH_SALT_ROUNDS=10

# API Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# ------------------------------
# AWS Configuration
# ------------------------------
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_REGION=us-west-2
S3_BUCKET_NAME=meesho-documents

# S3 Storage Paths
AWS_S3_DOCUMENTS_PREFIX=documents/
AWS_S3_IMAGES_PREFIX=images/
AWS_S3_VIDEOS_PREFIX=videos/

# ------------------------------
# Email Configuration
# ------------------------------
EMAIL_PROVIDER=smtp
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-email-password
EMAIL_FROM=noreply@meesho.com
EMAIL_FROM_NAME=Meesho Ecosystem

# ------------------------------
# Third-party APIs
# ------------------------------
# KYC/Verification
KYC_PROVIDER_API_KEY=your-kyc-api-key
KYC_PROVIDER_URL=https://api.kyc-provider.com

# Video Processing
VIDEO_API_KEY=your-video-api-key
VIDEO_API_URL=https://api.video-processor.com

# Payment Gateway
RAZORPAY_KEY_ID=your-razorpay-key
RAZORPAY_SECRET=your-razorpay-secret
RAZORPAY_WEBHOOK_SECRET=your-webhook-secret

# Maps & Location
GOOGLE_API_KEY=your-google-api-key
GOOGLE_MAPS_API_KEY=your-maps-api-key

# SMS Provider
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=your-twilio-sid
TWILIO_AUTH_TOKEN=your-twilio-token
TWILIO_FROM_NUMBER=+1234567890

# ------------------------------
# ML/AI Configuration
# ------------------------------
ML_MODEL_PATH=/models
TENSORFLOW_BACKEND=cpu
BERT_MODEL_URL=https://tfhub.dev/google/bert_uncased_L-12_H-768_A-12/1
ML_CONFIDENCE_THRESHOLD=0.85
ML_BATCH_SIZE=32

# ------------------------------
# Monitoring & Observability
# ------------------------------
# Application Monitoring
SENTRY_DSN=your-sentry-dsn
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# APM
NEW_RELIC_LICENSE_KEY=your-new-relic-key
NEW_RELIC_APP_NAME=meesho-ecosystem

# Metrics
PROMETHEUS_PORT=9090
GRAFANA_URL=http://localhost:3000

# ------------------------------
# Feature Flags
# ------------------------------
ENABLE_ML_DETECTION=true
ENABLE_VIDEO_REVIEWS=true
ENABLE_LOYALTY_PROGRAM=true
ENABLE_ADVANCED_ANALYTICS=true
ENABLE_REAL_TIME_NOTIFICATIONS=true
ENABLE_SELLER_VERIFICATION=true
ENABLE_SOCIAL_SHARING=false
ENABLE_DEBUG_MODE=false

# ------------------------------
# Business Logic Configuration
# ------------------------------
# SQS Calculation Weights
SQS_PRODUCT_QUALITY_WEIGHT=0.4
SQS_CUSTOMER_SATISFACTION_WEIGHT=0.3
SQS_OPERATIONAL_EFFICIENCY_WEIGHT=0.3
SQS_UPDATE_INTERVAL_MS=300000

# Review Settings
MIN_REVIEW_LENGTH=10
MAX_REVIEW_LENGTH=5000
REVIEW_MODERATION_THRESHOLD=0.7
FAKE_REVIEW_ML_THRESHOLD=0.8

# Loyalty Program
LOYALTY_POINTS_PER_PURCHASE=10
LOYALTY_POINTS_PER_REVIEW=50
LOYALTY_TIER_BRONZE_MIN=0
LOYALTY_TIER_SILVER_MIN=1000
LOYALTY_TIER_GOLD_MIN=5000
LOYALTY_TIER_PLATINUM_MIN=10000

# ------------------------------
# Development & Testing
# ------------------------------
USE_MOCK_DB=false
USE_MOCK_REDIS=false
USE_MOCK_RABBITMQ=false
SEED_DATABASE=false
ENABLE_SWAGGER=true
SWAGGER_PATH=/api-docs

# ------------------------------
# CORS Configuration
# ------------------------------
CORS_ORIGIN=http://localhost:3000,http://localhost:4200
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# ------------------------------
# Session Configuration
# ------------------------------
SESSION_SECRET=your-session-secret
SESSION_MAX_AGE=86400000
SESSION_SECURE=false
SESSION_HTTP_ONLY=true